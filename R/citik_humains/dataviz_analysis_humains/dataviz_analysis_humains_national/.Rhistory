################## Library calls and preliminary database connection ####################################
getwd()
setwd("./")
require(ggplot2)
require(RPostgreSQL)
require(MASS)
require(mgcv)
## Defining plotsaving Function Template
plotsave <- function(plotname, plotpath){
ggsave(filename = paste(plotname,'.png', sep = ''), path = plotpath, width=16, height =9  , units = 'in', dpi = 182)
}
## Defining Plots General Theming
plotstyle <- theme(plot.title = element_text(hjust = .5, face = 'bold', size = 14))+
theme(axis.title.x = element_text(face = 'bold', size = 12))+
theme(axis.title.y = element_text(face = 'bold', size = 12))
####### Getting data from postgres database for citik experimentation
###### Connection parameters and main human reports dataset associated to weather conditions
drv <- PostgreSQL()
con <- dbConnect(drv, dbname= 'localbase10', user='beetroot', password='root', port=5432, host='localhost')
query <- 'SELECT * FROM citik.citik_humains_clean_weather_strict'
res <- dbSendQuery(con, query)
dataset <- fetch(res, n=-1)
datasubset <- dataset[dataset$nbr_tique < 25 & dataset$sex_pique != '', -5]
View(datasubset)
ggplot(datasubset, aes(date_piqure_saisie))+
geom_point(aes(y=humidity), color='blue', size=.2, alpha=.7)+
geom_smooth(aes(y=humidity), color='black')+
geom_line( data = dataset_dsk700, aes(date_releve, humidite), color='green')+
geom_smooth(data=dataset_dsk700, color='red', mapping = aes(date_releve, humidite))+
ggtitle('Comparaison between vartiations in time of signaling vs witness humidity')+
xlab(label = 'Date')+
ylab(label=' Humidity %')+
plotstyle
################## Library calls and preliminary database connection ####################################
getwd()
setwd("./")
require(ggplot2)
require(RPostgreSQL)
require(MASS)
require(mgcv)
ggplot(datasubset, aes(date_piqure_saisie))+
geom_point(aes(y=humidity), color='blue', size=.2, alpha=.7)+
geom_smooth(aes(y=humidity), color='black')+
geom_line( data = dataset_dsk700, aes(date_releve, humidite), color='green')+
geom_smooth(data=dataset_dsk700, color='red', mapping = aes(date_releve, humidite))+
ggtitle('Comparaison between vartiations in time of signaling vs witness humidity')+
xlab(label = 'Date')+
ylab(label=' Humidity %')+
plotstyle
#############################  dsk synop 700 ##################
query_dsk700 <- 'SELECT * FROM meteo.darksky_maille_700_avg'
res <- dbSendQuery(con, query_dsk700)
dataset_dsk700 <- fetch(res, n=-1)
dataset_dsk700 <- fetch(res, n=-1)
###### Connection parameters and main human reports dataset associated to weather conditions
drv <- PostgreSQL()
con <- dbConnect(drv, dbname= 'localbase10', user='beetroot', password='root', port=5432, host='localhost')
dataset_dsk700 <- fetch(res, n=-1)
query_dsk700 <- 'SELECT * FROM meteo.darksky_maille_700_avg'
res <- dbSendQuery(con, query_dsk700)
dataset_dsk700 <- fetch(res, n=-1)
ggplot(datasubset, aes(date_piqure_saisie))+
geom_point(aes(y=humidity), color='blue', size=.2, alpha=.7)+
geom_smooth(aes(y=humidity), color='black')+
geom_line( data = dataset_dsk700, aes(date_releve, humidite), color='green')+
geom_smooth(data=dataset_dsk700, color='red', mapping = aes(date_releve, humidite))+
ggtitle('Comparaison between vartiations in time of signaling vs witness humidity')+
xlab(label = 'Date')+
ylab(label=' Humidity %')+
plotstyle
ggplot(datasubset, aes(date_piqure_saisie))+
geom_point(aes(y=temperature), color='blue', size=.2, alpha=.7)+
geom_smooth(aes(y=temperature), color='black')+
geom_line( data = dataset_dsk700, aes(date_releve, temperature), color='#00CC00')+
geom_smooth(data=dataset_dsk700, color='red', mapping = aes(date_releve, temperature))+
ggtitle('Comparaison between vartiations in time of signaling vs witness temperatures')+
xlab(label = 'Date')+
ylab(label=' Temperature degrees Celsius')+
facet_wrap(~region)+
plotstyle
p <- ggplot(aggnbr_tique, aes(sex_pique, sum_nbr_tique, fill=sex_pique))+
geom_bar(stat = "identity")+
xlab(label = 'Reporter’s Sex')+
ylab(label = 'Total Number of Collected Ticks')+
ggtitle('Total Number of Collected Ticks \n (Breakdown by Sex)')
p+plotstyle
plotsave('total_nbr_tick_col_by_sex', plotpath_quant_study)
## Defining plotsaving Function Template
plotsave <- function(plotname, plotpath){
ggsave(filename = paste(plotname,'.png', sep = ''), path = plotpath, width=16, height =9  , units = 'in', dpi = 182)
}
## Defining Plots General Theming
plotstyle <-  theme(plot.title = element_text(hjust = .5, face = 'bold', size = 14))+
theme(axis.title = element_text(face = 'bold', size = 12))+
require(ggplot2)
require(RPostgreSQL)
require(MASS)
require(mgcv)
p <- ggplot(aggnbr_tique, aes(sex_pique, sum_nbr_tique, fill=sex_pique))+
geom_bar(stat = "identity")+
xlab(label = 'Reporter’s Sex')+
ylab(label = 'Total Number of Collected Ticks')+
ggtitle('Total Number of Collected Ticks \n (Breakdown by Sex)')
p+plotstyle
p <- ggplot(aggnbr_tique, aes(sex_pique, sum_nbr_tique, fill=sex_pique))+
geom_bar(stat = "identity")+
xlab(label = 'Reporter’s Sex')+
ylab(label = 'Total Number of Collected Ticks')+
ggtitle('Total Number of Collected Ticks \n (Breakdown by Sex)')
require(ggplot2)
p <- ggplot(aggnbr_tique, aes(sex_pique, sum_nbr_tique, fill=sex_pique))+
geom_bar(stat = "identity")+
xlab(label = 'Reporter’s Sex')+
ylab(label = 'Total Number of Collected Ticks')+
ggtitle('Total Number of Collected Ticks \n (Breakdown by Sex)')
p <- ggplot(datasubset, aes(date_piqure_saisie))+
geom_histogram(binwidth = 5, alpha=.7, colour='red')+
xlab(label = 'Report Date')+
ylab(label = 'Report Date Count')+
ggtitle('Hisotgram of Report Date Frequency (Bin Width = 5 days)')
p+plotstyle
p <- ggplot(datasubset, aes(date_piqure_saisie))+
geom_histogram(binwidth = 5, alpha=.7, colour='green')+
xlab(label = 'Report Date')+
ylab(label = 'Report Date Count')+
ggtitle('Hisotgram of Report Date Frequency (Bin Width = 5 days)')
p+plotstyle
p <- ggplot(datasubset, aes(date_piqure_saisie))+
geom_histogram(binwidth = 7, alpha=.7, colour='green')+
xlab(label = 'Report Date')+
ylab(label = 'Report Date Count')+
ggtitle('Hisotgram of Report Date Frequency (Bin Width = 5 days)')
p+plotstyle
p <- ggplot(datasubset, aes(date_piqure_saisie))+
geom_histogram(binwidth = 7, alpha=.7, colour='green')+
xlab(label = 'Report Date')+
ylab(label = 'Report Date Count')+
ggtitle('Hisotgram of Report Date Frequency (Bin Width = 7 days)')
p+plotstyle
p <- ggplot(datasubset, aes(date_piqure_saisie))+
geom_histogram(binwidth = 7, alpha=.7, colour='green')+
xlab(label = 'Report Date')+
ylab(label = 'Report Date Count')+
ggtitle('Hisotgram of Report Date Frequency (Bin Width = 7 days)')
p+plotstyle
plotsave('ts_histogram_report_date_freq_five_days', plotpath_ts_dens_distro)
plotpath_ts_dens_distro <- paste(getwd(),'/plots/time_series_analysis_density_distribution', sep = '')
dir.create(plotpath_ts_dens_distro)
p <- ggplot(datasubset, aes(date_piqure_saisie))+
geom_histogram(binwidth = 7, alpha=.7, colour='green')+
xlab(label = 'Report Date')+
ylab(label = 'Report Date Count')+
ggtitle('Hisotgram of Report Date Frequency (Bin Width = 7 days)')
p+plotstyle
plotsave('ts_histogram_report_date_freq_five_days', plotpath_ts_dens_distro)
p <- ggplot(datasubset, aes(date_piqure_saisie))+
geom_histogram(binwidth = 7, alpha=.6, colour='green')+
xlab(label = 'Report Date')+
ylab(label = 'Report Date Count')+
ggtitle('Hisotgram of Report Date Frequency (Bin Width = 7 days)')
p+plotstyle
plotsave('ts_histogram_report_date_freq_five_days', plotpath_ts_dens_distro)
