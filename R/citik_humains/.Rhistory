con <- dbConnect(PostgreSQL()
, host="127.0.0.1"
, port="5432"
, user= "beetroot"
, password="root"
, dbname="localbase10")
##############################################
wdata <- as.data.frame(dbGetQuery(con,
"
SELECT
id
-------------- données générales
,lat
,lon
,date_piqure_saisie
,st_astext(geom)  as geom
,annee_extract
,sex_pique
,age
,nbr_tique
,precision_geo
,environnement
,environnement_precision
,icon
---------------- données météo
,humidity
,dewpoint
,pressure
,windspeed
,visibility
,cloudcover
,windgust
,uvindex
,precipintensity
,precipintensitymax
,temperaturehigh
,temperaturelow
FROM citik.citik_humains_clean_weather_strict
-- where sex_pique = 'Homme'
-- where sex_pique = 'Femme'
"
) )
## données darksky Nationale (darksky.net)
# Maille 42
# dskdata <-  dbGetQuery(con, "SELECT * FROM meteo.darksky_synop42_avg ; " )
# Maille 726
dskdata <- dbGetQuery(con, " SELECT * FROM meteo.darksky_maille_700_avg ; " )
############################################## Traitement de la donnée pour les animaux ##############################################
setwd("./")
getwd()
######## activation des librairies nécessaires à l'importation et l'analyse de la BDD #######
######## activer le package de gestion de base de donée postgresql
######## compilation du code de connexion ####
library("RPostgreSQL")
con <- dbConnect(PostgreSQL()
, host="127.0.0.1"
, port="5432"
, user= "beetroot"
, password="root"
, dbname="localbase10")
##############################################
wdata <- as.data.frame(dbGetQuery(con,
"
SELECT
id
-------------- données générales
,lat
,lon
,date_piqure_saisie
,st_astext(geom)  as geom
,annee_extract
,sex_pique
,age
,nbr_tique
,precision_geo
,environnement
,environnement_precision
,icon
---------------- données météo
,humidity
,dewpoint
,pressure
,windspeed
,visibility
,cloudcover
,windgust
,uvindex
,precipintensity
,precipintensitymax
,temperaturehigh
,temperaturelow
FROM citik.citik_humains_clean_weather_strict
-- where sex_pique = 'Homme'
-- where sex_pique = 'Femme'
"
) )
## données darksky Nationale (darksky.net)
# Maille 42
# dskdata <-  dbGetQuery(con, "SELECT * FROM meteo.darksky_synop42_avg ; " )
# Maille 726
dskdata <- dbGetQuery(con, " SELECT * FROM meteo.darksky_maille_700_avg ; " )
# Maille 726
dskdata <- dbGetQuery(con, " SELECT * FROM meteo.darksky_maille_700_avg ; " )
length(dskdata$temperature)
range(dskdata$temperature , na.rm = 1 )
############################################## Traitement de la donnée pour les animaux ##############################################
setwd("./")
getwd()
######## activation des librairies nécessaires à l'importation et l'analyse de la BDD #######
######## activer le package de gestion de base de donée postgresql
######## compilation du code de connexion ####
library("RPostgreSQL")
con <- dbConnect(PostgreSQL()
, host="127.0.0.1"
, port="5432"
, user= "beetroot"
, password="root"
, dbname="localbase10")
##############################################
wdata <- as.data.frame(dbGetQuery(con,
"
SELECT
id
-------------- données générales
,lat
,lon
,date_piqure_saisie
,st_astext(geom)  as geom
,annee_extract
,sex_pique
,age
,nbr_tique
,precision_geo
,environnement
,environnement_precision
,icon
---------------- données météo
,humidity
,dewpoint
,pressure
,windspeed
,visibility
,cloudcover
,windgust
,uvindex
,precipintensity
,precipintensitymax
,temperaturehigh
,temperaturelow
FROM citik.citik_humains_clean_weather_strict
-- where sex_pique = 'Homme'
-- where sex_pique = 'Femme'
"
) )
## données darksky Nationale (darksky.net)
# Maille 42
# dskdata <-  dbGetQuery(con, "SELECT * FROM meteo.darksky_synop42_avg ; " )
# Maille 726
dskdata <- dbGetQuery(con, " SELECT * FROM meteo.darksky_maille_700_avg ; " )
wdata <- as.data.frame(dbGetQuery(con,
"
SELECT
id
-------------- données générales
,lat
,lon
,date_piqure_saisie
,st_astext(geom)  as geom
,annee_extract
,sex_pique
,age
,nbr_tique
,precision_geo
,environnement
,environnement_precision
,icon
---------------- données météo
,humidity
,dewpoint
,pressure
,windspeed
,visibility
,cloudcover
,windgust
,uvindex
,precipintensity
,precipintensitymax
,temperaturehigh
,temperaturelow
FROM citik.citik_humains_clean_weather_strict
-- where sex_pique = 'Homme'
-- where sex_pique = 'Femme'
"
) )
View(wdata)
wdata <- as.data.frame(dbGetQuery(con,
"
SELECT
id
-------------- données générales
,lat
,lon
,date_piqure_saisie
,st_astext(geom)  as geom
,annee_extract
,sex_pique
,age
,nbr_tique
,precision_geo
,environnement
,environnement_precision
,icon
---------------- données météo
,humidity
,dewpoint
,pressure
,windspeed
,visibility
,cloudcover
,windgust
,uvindex
,precipintensity
,precipintensitymax
,temperaturehigh
,temperaturelow
,temperature
FROM citik.citik_humains_clean_weather_strict
-- where sex_pique = 'Homme'
-- where sex_pique = 'Femme'
"
) )
wdata <- as.data.frame(dbGetQuery(con,
"
SELECT
id
-------------- données générales
,lat
,lon
,date_piqure_saisie
,st_astext(geom)  as geom
,annee_extract
,sex_pique
,age
,nbr_tique
,precision_geo
,environnement
,environnement_precision
,icon
---------------- données météo
,humidity
,dewpoint
,pressure
,windspeed
,visibility
,cloudcover
,windgust
,uvindex
,precipintensity
,precipintensitymax
,temperaturehigh
,temperaturelow
,temperature
,temperatureoffset2
FROM citik.citik_humains_clean_weather_strict
-- where sex_pique = 'Homme'
-- where sex_pique = 'Femme'
"
) )
range(wdata$temperature, na.rm = 1)
range(dskdata$temperature , na.rm = 1 )
range(wdata$temperature, na.rm = 1)
range(dskdata$temperature , na.rm = 1 )
BR15 <- seq(from= -5, to= 35, by=1)
BR15
length(BR15)
### histogramme de température nocturnes comparé:
h<-hist(wdata$temperature, breaks = BR15, freq=F,
col="grey",
main = paste("Fréquence de signalements de piqûres de tiques en fonction de la température \n  ( de  21 à 06h ) , ",nr," signalements  humains (France HDTOM, 2017-20)"),
ylab = "Denisté  (Somme=1)",
xlab = "Température (T°C)",
ylim = c(0,.11),
xlim = c(-10,30),
cex.main = 1.3,
cex.lab = 1.5,
cex.axis = 1.5
)
### courbe non lissée
HH15 <- hist(dskdata$temperature, breaks = BR15,  plot=F)
range(dskdata$temperature , na.rm = 1 )
BR15 <- seq(from= -6, to= 35, by=1)
BR15
length(BR15)
### histogramme de température nocturnes comparé:
h<-hist(wdata$temperature, breaks = BR15, freq=F,
col="grey",
main = paste("Fréquence de signalements de piqûres de tiques en fonction de la température \n  ( de  21 à 06h ) , ",nr," signalements  humains (France HDTOM, 2017-20)"),
ylab = "Denisté  (Somme=1)",
xlab = "Température (T°C)",
ylim = c(0,.11),
xlim = c(-10,30),
cex.main = 1.3,
cex.lab = 1.5,
cex.axis = 1.5
)
### courbe non lissée
HH15 <- hist(dskdata$temperature, breaks = BR15,  plot=F)
lines(HH15$mids, HH15$density, lwd = 2, col = "green")
### courbe lissée,
lines(density(dskdata$temperaturelow, na.rm = 1), lwd = 2, col = "red")
### courbe lissée,  hyp +2 C°
HH15hyp <- hist(dskdata$temperaturelowoffset2, breaks = BR15,  plot=F)
### courbe lissée,  hyp +2 C°
HH15 <- hist(dskdata$temperaturelowoffset2, breaks = BR15,  plot=F)
### courbe lissée,  hyp +2 C°
HH15 <- hist(dskdata$temperatureffset2, breaks = BR15,  plot=F)
### courbe lissée,  hyp +2 C°
HH15 <- hist(dskdata$temperatureoffset2, breaks = BR15,  plot=F)
lines(density(dskdata$temperatureoffset2, na.rm = 1), lwd = 2, col = "blue")
text(23, 0.08, paste("N = ",nr," signalements" ),col = "black")
text(04, 0.08, paste("M = Mesure Nationale (darksky.net)" ), col = "red")
text(06, 0.10, paste("M = Courbe brute" ), cex =1 ,  col = "green")
text(-5, 0.04, paste("M+ = Hypothèse +2 C°" ), cex =1 ,  col = "blue")
sum(h$density)
sum(HH15$density)
source('~/Developer/python/CNRS/projetCitique/pycitique/R/citik_humains/citik_humains_dsk_pdf_pgsql.R')
length(wdata$humidity)
length(dskdata$humidity)
range(wdata$humidity, na.rm = 1)
range( (dskdata$humidity), na.rm = 1 )
BR2 <- seq(from= 0, to= 100, by=1)
BR2
length(BR2)
y<-hist(wdata$humidity, breaks = BR2, freq=F,
col="grey",
main = paste("Fréquence de signalements de piqûres de tiques en fonction de l'humidité\n (2017-2020),",nr,"  signalements  humains (France HDTOM, 2017-20)"),
ylab = ("Densité (Somme=100)"),
xlab = "Humidité (%)",
ylim = c(0, 6),
xlim = c(0, 1),
cex.main = 1.3,
cex.lab = 1.5,
cex.axis = 1.5
)
source('~/Developer/python/CNRS/projetCitique/pycitique/R/citik_humains/citik_humains_dsk_pdf_pgsql.R')
source('~/Developer/python/CNRS/projetCitique/pycitique/R/citik_humains/citik_humains_dsk_pdf_pgsql.R')
source('~/Developer/python/CNRS/projetCitique/pycitique/R/citik_humains/citik_humains_dsk_pdf_pgsql.R')
source('~/Developer/python/CNRS/projetCitique/pycitique/R/citik_humains/citik_humains_dsk_pdf_pgsql.R')
source('~/Developer/python/CNRS/projetCitique/pycitique/R/citik_humains/citik_humains_dsk_pdf_pgsql.R')
source('~/Developer/python/CNRS/projetCitique/pycitique/R/citik_humains/citik_humains_dsk_pdf_pgsql.R')
# #################################################### comparatif Température moyenne ####################################################
length(wdata$temperature)
length(mfdata$temperature)
range(wdata$temperature, na.rm = 1)
range(mfdata$temperature , na.rm = 1 )
BR15 <- seq(from= -5, to= 35, by=1)
BR15
length(BR15)
### histogramme de température nocturnes comparé:
h<-hist(wdata$temperature, breaks = BR15, freq=F,
col="grey",
main = paste("Fréquence de signalements de piqûres de tiques en fonction de la température \n , ",nr," signalements  humains (France HDTOM, 2017-20)"),
ylab = "Denisté  (Somme=1)",
xlab = "Température (T°C)",
ylim = c(0,.11),
xlim = c(-10,30),
cex.main = 1.3,
cex.lab = 1.5,
cex.axis = 1.5
)
### courbe non lissée
HH15 <- hist(mfdata$temperature, breaks = BR15,  plot=F)
lines(HH15$mids, HH15$density, lwd = 2, col = "green")
### courbe lissée,
lines(density(mfdata$temperature, na.rm = 1), lwd = 2, col = "red")
### courbe lissée,  hyp +2 C°
HH15 <- hist(mfdata$temperatureoffset2, breaks = BR15,  plot=F)
lines(density(mfdata$temperatureoffset2, na.rm = 1), lwd = 2, col = "blue")
text(23, 0.08, paste("N = ",nr," signalements" ),col = "black")
text(04, 0.08, paste("M = Mesure Nationale (darksky.net)" ), col = "red")
text(06, 0.10, paste("M = Courbe brute" ), cex =1 ,  col = "green")
text(-5, 0.04, paste("M+ = Hypothèse +2 C°" ), cex =1 ,  col = "blue")
sum(h$density)
sum(HH15$density)
h<-hist(wdata$temperature, breaks = BR15, freq=F,
col="grey",
main = paste("Fréquence de signalements de piqûres de tiques en fonction de la température \n , ",nr," signalements  humains (France HDTOM, 2017-20)"),
ylab = "Denisté  (Somme=1)",
xlab = "Température (T°C)",
ylim = c(0,.11),
xlim = c(-10,30),
cex.main = 1.3,
cex.lab = 1.5,
cex.axis = 1.5
)
### courbe non lissée
HH15 <- hist(mfdata$temperature, breaks = BR15,  plot=F)
lines(HH15$mids, HH15$density, lwd = 2, col = "green")
### courbe lissée,
lines(density(mfdata$temperature, na.rm = 1), lwd = 2, col = "red")
### courbe lissée,  hyp +2 C°
HH15 <- hist(mfdata$temperatureoffset2, breaks = BR15,  plot=F)
lines(density(mfdata$temperatureoffset2, na.rm = 1), lwd = 2, col = "blue")
text(25, 0.08, paste("N = ",nr," signalements" ),col = "black")
text(04, 0.08, paste("M = Mesure Nationale (darksky.net)" ), col = "red")
text(06, 0.10, paste("M = Courbe brute" ), cex =1 ,  col = "green")
text(-5, 0.04, paste("M+ = Hypothèse +2 C°" ), cex =1 ,  col = "blue")
h<-hist(wdata$temperature, breaks = BR15, freq=F,
col="grey",
main = paste("Fréquence de signalements de piqûres de tiques en fonction de la température \n , ",nr," signalements  humains (France HDTOM, 2017-20)"),
ylab = "Denisté  (Somme=1)",
xlab = "Température (T°C)",
ylim = c(0,.11),
xlim = c(-10,30),
cex.main = 1.3,
cex.lab = 1.5,
cex.axis = 1.5
)
### courbe non lissée
HH15 <- hist(mfdata$temperature, breaks = BR15,  plot=F)
lines(HH15$mids, HH15$density, lwd = 2, col = "green")
### courbe lissée,
lines(density(mfdata$temperature, na.rm = 1), lwd = 2, col = "red")
### courbe lissée,  hyp +2 C°
HH15 <- hist(mfdata$temperatureoffset2, breaks = BR15,  plot=F)
lines(density(mfdata$temperatureoffset2, na.rm = 1), lwd = 2, col = "blue")
text(29, 0.08, paste("N = ",nr," signalements" ),col = "black")
text(04, 0.08, paste("M = Mesure Nationale (darksky.net)" ), col = "red")
text(06, 0.10, paste("M = Courbe brute" ), cex =1 ,  col = "green")
text(-5, 0.04, paste("M+ = Hypothèse +2 C°" ), cex =1 ,  col = "blue")
sum(h$density)
sum(HH15$density)
### histogramme de température nocturnes comparé:
h<-hist(wdata$temperature, breaks = BR15, freq=F,
col="grey",
main = paste("Fréquence de signalements de piqûres de tiques en fonction de la température \n , ",nr," signalements  humains (France HDTOM, 2017-20)"),
ylab = "Denisté  (Somme=1)",
xlab = "Température (T°C)",
ylim = c(0,.11),
xlim = c(-10,30),
cex.main = 1.3,
cex.lab = 1.5,
cex.axis = 1.5
)
### courbe non lissée
HH15 <- hist(mfdata$temperature, breaks = BR15,  plot=F)
lines(HH15$mids, HH15$density, lwd = 2, col = "green")
### courbe lissée,
lines(density(mfdata$temperature, na.rm = 1), lwd = 2, col = "red")
### courbe lissée,  hyp +2 C°
HH15 <- hist(mfdata$temperatureoffset2, breaks = BR15,  plot=F)
lines(density(mfdata$temperatureoffset2, na.rm = 1), lwd = 2, col = "blue")
text(27, 0.08, paste("N = ",nr," signalements" ),col = "black")
text(04, 0.08, paste("M = Mesure Nationale (darksky.net)" ), col = "red")
text(06, 0.10, paste("M = Courbe brute" ), cex =1 ,  col = "green")
text(-5, 0.04, paste("M+ = Hypothèse +2 C°" ), cex =1 ,  col = "blue")
source('~/Developer/python/CNRS/projetCitique/pycitique/R/citik_humains/citik_humains_dsk_pdf_pgsql.R')
source('~/Developer/python/CNRS/projetCitique/pycitique/R/citik_humains/citik_humains_mf_pdf_pgsql.R')
source('~/Developer/python/CNRS/projetCitique/pycitique/R/citik_humains/citik_humains_mf_pdf_pgsql.R')
source('~/Developer/python/CNRS/projetCitique/pycitique/R/citik_humains/citik_humains_mf_pdf_pgsql.R')
# #################################################### comparatif Température moyenne ####################################################
length(wdata$temperature)
length(mfdata$temperature)
range(wdata$temperature, na.rm = 1)
range(mfdata$temperature , na.rm = 1 )
BR15 <- seq(from= -5, to= 35, by=1)
BR15
length(BR15)
### histogramme de température nocturnes comparé:
h<-hist(wdata$temperature, breaks = BR15, freq=F,
col="grey",
main = paste("Fréquence de signalements de piqûres de tiques en fonction de la température \n , ",nr," signalements  humains (France HDTOM, 2017-20)"),
ylab = "Denisté  (Somme=1)",
xlab = "Température (T°C)",
ylim = c(0,.11),
xlim = c(-10,30),
cex.main = 1.3,
cex.lab = 1.5,
cex.axis = 1.5
)
### courbe non lissée
HH15 <- hist(mfdata$temperature, breaks = BR15,  plot=F)
### histogramme de température nocturnes comparé:
h<-hist(wdata$temperature, breaks = BR15, freq=F,
col="grey",
main = paste("Fréquence de signalements de piqûres de tiques en fonction de la température \n , ",nr," signalements  humains (France HDTOM, 2017-20)"),
ylab = "Denisté  (Somme=1)",
xlab = "Température (T°C)",
ylim = c(0,.11),
xlim = c(-10,30),
cex.main = 1.3,
cex.lab = 1.5,
cex.axis = 1.5
)
range(wdata$temperature, na.rm = 1)
range(mfdata$temperature , na.rm = 1 )
range(wdata$temperature, na.rm = 1)
# #################################################### comparatif Température moyenne ####################################################
length(wdata$temperature)
length(mfdata$temperature)
source('~/Developer/python/CNRS/projetCitique/pycitique/R/citik_humains/citik_humains_mf_pdf_pgsql.R')
# #################################################### comparatif Température moyenne ####################################################
length(wdata$temperature)
length(mfdata$temperature)
range(wdata$rature, na.rm = 1)
range(wdata$temperature, na.rm = 1)
range(mfdata$temperature , na.rm = 1 )
source('~/Developer/python/CNRS/projetCitique/pycitique/R/citik_humains/citik_humains_mf_pdf_pgsql.R')
source('~/Developer/python/CNRS/projetCitique/pycitique/R/citik_humains/citik_humains_mf_pdf_pgsql.R')
source('~/Developer/python/CNRS/projetCitique/pycitique/R/citik_humains/citik_humains_dsk_pdf_pgsql.R')
source('~/Developer/python/CNRS/projetCitique/pycitique/R/citik_humains/citik_humains_mf_pdf_pgsql.R')
source('~/Developer/python/CNRS/projetCitique/pycitique/R/citik_humains/citik_humains_mf_pdf_pgsql.R')
